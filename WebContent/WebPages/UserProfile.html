<!DOCTYPE html>
<html>
    <head> 
        <title>Mobile Online Shopping</title> 
        <meta name="viewport" content="width=device-width, initial-scale=1"> 
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
 		<link rel="stylesheet" href="http://demos.jquerymobile.com/1.2.0/css/themes/default/jquery.mobile-1.2.0.css">
 		<link rel="stylesheet" href=http://demos.jquerymobile.com/1.2.0/docs/_assets/css/jqm-docs.css>
 		<link rel="stylesheet" href="http://code.jquery.com/mobile/1.4.2/jquery.mobile-1.4.2.min.css">
		<script src="http://code.jquery.com/jquery-1.10.2.min.js"></script>
		<script src="http://code.jquery.com/mobile/1.4.2/jquery.mobile-1.4.2.min.js"></script>
		<link type="text/css" rel="stylesheet" href="css/MyStyles.css" />
		<script src="js/ProductLine.Provider.js" type="text/javascript"></script>
		<script src="js/ProductLine.UserContext.js" type="text/javascript"></script>
		<script src="js/ProductLine.ShoppingCart.js" type="text/javascript"></script>
           </head><body>
	<!-- Start of first page: #one -->
	 <div data-role="page" id="userProfile">
		 <div data-role="header" data-theme="b">
			<div data-role="navbar">
				<ul>
					<li id="Profile"><a href="UserProfile.html" data-icon="star" class="ui-btn-active">My Profile</a></li>
					<li id="Shopping"><a href="Index.html" data-icon="grid">Shopping</a></li>
					<li id="Orders"><a href="#navpanel" data-role="button" class="ui-icon-shop" data-icon="bars" data-iconpos="notext" data-theme="b" data-inline="true">Options</a></li>
				</ul>
			</div><!-- /navbar -->
	  	</div>
		<!-- /header -->
		<div data-role="main" class="ui-content">
		 <div data-demo-html="true">
			 <div data-role="panel" id="navpanel" data-theme="a"
		         data-display="overlay" data-position="right">
		        <div data-role="controlgroup" >
		            <a href="CartItems.html" data-role="button" data-theme="b" >My Cart</a>
		            <a href="#" data-role="button" data-theme="b" >help</a>
		            <a href="#" data-role="button" data-theme="b" >Logout</a>
		        </div>
		    </div>
			<div data-role="collapsible" id ="personalInfoDiv" data-content-theme="c">		
				<h3 id ="personalInfoHeader">Personal Info</h3>
				<div id="readOnlyPersonalInfo">
					<div data-role="fieldcontain">
						 <label for="FirstName"><strong>First Name</strong></label>
						 <label id="FirstName"></label>
			        	 <!-- <p id="FirstName" class="FirstName"> </p> -->
			        </div>
			        <div data-role="fieldcontain">
						 <label for="LastName"><strong>Last Name</strong></label>
			        	 <label id="LastName" class="LastName"> </label>
			        </div>
			        <div data-role="fieldcontain">
						 <label for="Phone"><strong>Phone</strong></label>
			        	 <label id="Phone" class="Phone"> </label>
			        </div>
			        <div data-role="fieldcontain">
						 <label for="Email"><strong>Email</strong></label>
			        	 <label id="Email" class="Email">  </label>
			        </div>
					 <input type="button" id="editPersonalInfoBtn" data-role="button" data-icon="edit" data-theme="b" data-inline="true" value="Edit"/>
				</div>
				<div id="editablePersonalInfo" class="ui-screen-hidden">
					<div data-role="fieldcontain">
						 <label for="FirstName"><strong>First Name</strong></label>
			        	  <input type="text" name="FirstName" id= "FirstName" value=""  />
			        </div>
			        <div data-role="fieldcontain">
						 <label for="LastName"><strong>Last Name</strong></label>
			        	  <input type="text" name="LastName" id= "LastName" value=""  />
			        </div>
			        <div data-role="fieldcontain">
						 <label for="Phone"><strong>Phone</strong></label>
			        	  <input type="text" name="Phone" id= "Phone" value=""  />
			        </div>
			        <div data-role="fieldcontain">
						 <label for="Email"><strong>Email</strong></label>
			        	 <input type="text" name="Email" id= "Email" value=""  />
			        </div>
					 <input type="button" id="savePersonalInfoBtn" data-role="button" data-icon="check" data-theme="b" data-inline="true" value="Submit"/>
					 <input type="reset"  class="cancelChanges" id="cancelPersonalInfoBtn"  data-icon="delete" data-theme="b" data-inline="true" value="Cancel"/>
				</div>
			</div>
			
			<!-- 	AddressInfo Div -->	
			<div data-role="collapsible" id ="addressInfoDiv" data-content-theme="c">		
				<h3 id ="addressInfoHeader">Address Info</h3>
				 
				<div id="readOnlyAddressInfo">
					<div data-role="fieldcontain">
						 <label for="Address1"><strong>Address1</strong></label>
			        	 <label id="Address1" class="Address1"> </label>
			        </div>
			        <div data-role="fieldcontain">
						 <label for="Address2"><strong>Address2</strong></label>
			        	 <label id="Address2" class="Address2"> </label>
			        </div>
			        <div data-role="fieldcontain">
						 <label for="State"><strong>State</strong></label>
			        	 <label id="State" class="State"> </label>
			        </div>
			        <div data-role="fieldcontain">
						 <label for="Zip"><strong>Zip</strong></label>
			        	 <label id="Zip" class="Zip">  </label>
			        </div>
					 <input type="button" id="editAddressInfoBtn" data-role="button" data-icon="edit" data-theme="b" data-inline="true" value="Edit"/>
				</div>
				<div id="editableAddressInfo" class="ui-screen-hidden">
					<div data-role="fieldcontain">
						 <label for="Address1"><strong>Address1</strong></label>
			        	  <input type="text" name="Address1" id= "Address1" value=""  />
			        </div>
			        <div data-role="fieldcontain">
						 <label for="Address2"><strong>Address2</strong></label>
			        	  <input type="text" name="Address2" id= "Address2" value=""  />
			        </div>
			        <div data-role="fieldcontain">
						 <label for="State"><strong>State</strong></label>
			        	  <input type="text" name="State" id= "State" value=""  />
			        </div>
			        <div data-role="fieldcontain">
						 <label for="Zip"><strong>Zip</strong></label>
			        	  <input type="text" name="Zip" id= "Zip" value=""  />
			        </div>
					 <input type="button" id="saveAddressInfoBtn" data-role="button" data-icon="check" data-theme="b" data-inline="true" value="Submit"/>
					 <input type="button"  class="cancelChanges" id="cancelAddressInfoBtn"data-role="button" data-icon="delete" data-theme="b" data-inline="true" value="Cancel"/>
				</div>
			</div>
				<!-- 	Login Info Div -->	
			<div data-role="collapsible" id ="loginInfoDiv" data-content-theme="c">		
				<h3 id ="loginInfoHeader">Login Info</h3>
				 
				<div id="readOnlyLoginInfo">
					<div data-role="fieldcontain">
						 <label for="UserName"><strong>User Name</strong></label>
			        	 <label id="UserName" class="UserName"> </label>
			        </div>
			        <div data-role="fieldcontain">
						 <label for="Password"><strong>Password</strong></label>
			        	 <label id="Password" class="Password"> </label>
			        </div>
					 <input type="button" id="editLoginInfoBtn" data-role="button" data-icon="edit" data-theme="b" data-inline="true" value="Edit"/>
				</div>
				<div id="editableLoginInfo" class="ui-screen-hidden">
					<div data-role="fieldcontain">
						 <label for="UserName"><strong>User Name</strong></label>
			        	  <input type="text" name="UserName" id= "UserName" value=""  />
			        </div>
			        <div data-role="fieldcontain">
						 <label for="Password"><strong>Password</strong></label>
			        	  <input type="text" name="Password" id= "Password" value=""  />
			        </div>
					 <input type="button"  id="saveLoginInfoBtn" data-role="button" data-icon="check" data-theme="b" data-inline="true" value="Submit"/>
					 <input type="button"  class="cancelChanges" id="cancelLoginInfoBtn" data-role="button" data-icon="delete" data-theme="b" data-inline="true" value="Cancel"/>
				</div>
			</div>
							<!-- 	Payment Info Div -->	
			<div data-role="collapsible" id ="paymentInfoDiv" data-content-theme="c">		
				<h3 id ="paymentInfoHeader">Payment Info</h3>
				 
				<div id="readOnlyPaymentInfo">
					<div data-role="fieldcontain">
						 <label for="CreditCardNum"><strong>Credit Card Number</strong></label>
			        	 <label id="CreditCardNum" class="CreditCardNum"> </label>
			        </div>
			        <div data-role="fieldcontain">
						 <label for="CardType"><strong>Card Type</strong></label>
			        	 <label id="CardType" class="CardType"> </label>
			        </div>
			        <div data-role="fieldcontain">
						 <label for="NameOnCard"><strong>Name On Card</strong></label>
			        	 <label id="NameOnCard" class="NameOnCard"> </label>
			        </div>
			        <div data-role="fieldcontain">
						 <label for="CVV"><strong>CVV</strong></label>
			        	 <label id="CVV" class="CVV"> </label>
			        </div>
			        <div data-role="fieldcontain">
						 <label for="ExpiryDate"><strong>Expiry Date</strong></label>
			        	 <label id="ExpiryDate" class="ExpiryDate"> </label>
			        </div>
			        
					 <input type="button" id="editPaymentInfoBtn" data-role="button" data-icon="edit" data-theme="b" data-inline="true" value="Edit"/>
				</div>
				<div id="editablePaymentInfo" class="ui-screen-hidden">
					<div data-role="fieldcontain">
						 <label for="CreditCardNum"><strong>Credit Card Number</strong></label>
			        	  <input type="text" name="CreditCardNum" id= "CreditCardNum" value=""  />
			        </div>
			        <div data-role="fieldcontain">
						 <label for="CardType"><strong>Card Type</strong></label>
			        	  <input type="text" name="CardType" id= "CardType" value=""  />
			        </div>
			        <div data-role="fieldcontain">
						 <label for="NameOnCard"><strong>Name On Card</strong></label>
			        	  <input type="text" name="NameOnCard" id= "NameOnCard" value=""  />
			        </div>
			        <div data-role="fieldcontain">
						 <label for="CVV"><strong>CVV</strong></label>
			        	  <input type="text" name="CVV" id= "CVV" value=""  />
			        </div>
			        <div data-role="fieldcontain">
						 <label for="ExpiryDate"><strong>Expiry Date</strong></label>
			        	  <input type="text" name="ExpiryDate" id= "ExpiryDate" value=""  />
			        </div>

					 <input type="button"  id="savePaymentInfoBtn" data-role="button" data-icon="check" data-theme="b" data-inline="true" value="Submit"/>
					 <input type="button"  class="cancelChanges" id="cancelPaymentInfoBtn" data-role="button" data-icon="delete" data-theme="b" data-inline="true" value="Cancel"/>
				</div>
			</div>
		   
         </div><!-- /demo-html --> 		 
		</div>

		<!-- /content -->
		<div data-role="footer" data-theme="b">
		    <h1>FindStuff@Wiu.edu</h1>
		 </div>
		<!-- /footer -->

	<!-- /page -->
         <script type="text/javascript">
         
         	  var CustomerObj = ProductLine.UserContext.Customer;
         	  var paymentObj;
         	  function populateFields(){
         	  	$.each(CustomerObj, function(index, field) {
         	  	if(index == "paymentInfo"){
         	  		paymentObj = CustomerObj[index];
         	  		$.each(paymentObj , function(i, field) {
         	  			 $("#"+i).text(paymentObj[i]);
	         	  			$("[name="+i+"]").val(paymentObj[i]);
						}); 
         	  		}
				else{
         	  		$("#"+index).text(CustomerObj[index]);
         	  			$("[name="+index+"]").val(CustomerObj[index]);
						//console.log(CustomerObj[index]);
					} 
         	 	 });

         	  };
         	  
         	  function displayResults(data){
         	  ProductLine.UserContext.Customer = data;
         	  populateFields();
         	  };
         	  
			  var viewPersonalInfoBtn = $("#personalInfoHeader");
			  var readOnlyPersonalInfoDiv = $("#readOnlyPersonalInfo");
			  var editablePersonalInfoDiv = $("#editablePersonalInfo");
			  var editPersonalInfoBtn = $("#editPersonalInfoBtn");
			  
			  var viewAddressInfoBtn = $("#addressInfoHeader");
			  var readOnlyAddressInfoDiv = $("#readOnlyAddressInfo");
			  var editableAddressInfoDiv = $("#editableAddressInfo");
			  var editAddressInfoBtn = $("#editAddressInfoBtn");
			  
			  var viewLoginInfoBtn = $("#loginInfoHeader");
			  var readOnlyLoginInfoDiv = $("#readOnlyLoginInfo");
			  var editableLoginInfoDiv = $("#editableLoginInfo");
			  var editLoginInfoBtn = $("#editLoginInfoBtn");
			  
			  var viewPaymentInfoBtn = $("#paymentInfoHeader");
			  var readOnlyPaymentInfoDiv = $("#readOnlyPaymentInfo");
			  var editablePaymentInfoDiv = $("#editablePaymentInfo");
			  var editPaymentInfoBtn = $("#editPaymentInfoBtn");
			  
			  $(document).on("pagebeforeshow","#userProfile",function(event){
				 if(ProductLine.UserContext.isLoggedIn == false)
				 		$("#loginErrorMessage").text("Please sign in to view details!");
			  });
         	  $("#userProfile").on("pageshow", function () { 
         	    populateFields();
         		viewPersonalInfoBtn.on('click',function(){	
         			 readOnlyPersonalInfoDiv.removeClass("ui-screen-hidden");
					 editablePersonalInfoDiv.addClass("ui-screen-hidden");
				});
         		editPersonalInfoBtn.on('click',function(){	
         			 readOnlyPersonalInfoDiv.addClass("ui-screen-hidden");
					 editablePersonalInfoDiv.removeClass("ui-screen-hidden");
				});
				$("#savePersonalInfoBtn").on('click',function(){	
					CustomerObj.FirstName  = $("[name=FirstName]").val();
					CustomerObj.LastName  = $("[name=LastName]").val();
					CustomerObj.Phone  = $("[name=Phone]").val();
					CustomerObj.Email  = $("[name=Email]").val();
         			ProductLine.Provider.GetCallService("POST",ProductLine.Provider.defaultOptions.updateCustomerUri(), JSON.stringify(CustomerObj), displayResults);
         			readOnlyPersonalInfoDiv.removeClass("ui-screen-hidden");
					editablePersonalInfoDiv.addClass("ui-screen-hidden");
				});
				
				viewAddressInfoBtn.on('click',function(){	
         			 readOnlyAddressInfoDiv.removeClass("ui-screen-hidden");
					 editableAddressInfoDiv.addClass("ui-screen-hidden");
				});
         		editAddressInfoBtn.on('click',function(){	
         			 readOnlyAddressInfoDiv.addClass("ui-screen-hidden");
					 editableAddressInfoDiv.removeClass("ui-screen-hidden");
				});
				$("#saveAddressInfoBtn").on('click',function(){	
					CustomerObj.Address1  = $("[name=Address1]").val();
					CustomerObj.Address2  = $("[name=Address2]").val();
					CustomerObj.State  = $("[name=State]").val();
					CustomerObj.Zip  = $("[name=Zip]").val();
         			ProductLine.Provider.GetCallService("POST",ProductLine.Provider.defaultOptions.updateCustomerUri(), JSON.stringify(CustomerObj), displayResults);
         			readOnlyAddressInfoDiv.removeClass("ui-screen-hidden");
					editableAddressInfoDiv.addClass("ui-screen-hidden");
				});
				
				viewLoginInfoBtn.on('click',function(){	
         			 readOnlyLoginInfoDiv.removeClass("ui-screen-hidden");
					 editableLoginInfoDiv.addClass("ui-screen-hidden");
				});
         		editLoginInfoBtn.on('click',function(){	
         			 readOnlyLoginInfoDiv.addClass("ui-screen-hidden");
					 editableLoginInfoDiv.removeClass("ui-screen-hidden");
				});
				$("#saveLoginInfoBtn").on('click',function(){	
					CustomerObj.UserName  = $("[name=UserName]").val();
					CustomerObj.Password  = $("[name=Password]").val();
         			ProductLine.Provider.GetCallService("POST",ProductLine.Provider.defaultOptions.updateCustomerUri(), JSON.stringify(CustomerObj), displayResults);
         			readOnlyLoginInfoDiv.removeClass("ui-screen-hidden");
					editableLoginInfoDiv.addClass("ui-screen-hidden");
				});
				
				viewPaymentInfoBtn.on('click',function(){	
         			 readOnlyPaymentInfoDiv.removeClass("ui-screen-hidden");
					 editablePaymentInfoDiv.addClass("ui-screen-hidden");
				});
         		editPaymentInfoBtn.on('click',function(){	
         			 readOnlyPaymentInfoDiv.addClass("ui-screen-hidden");
					 editablePaymentInfoDiv.removeClass("ui-screen-hidden");
				});
				$("#savePaymentInfoBtn").on('click',function(){	
					CustomerObj.paymentInfo.NameOnCard  = $("[name=NameOnCard]").val();
					CustomerObj.paymentInfo.ExpiryDate  = $("[name=ExpiryDate]").val();
					CustomerObj.paymentInfo.CreditCardNum  = $("[name=CreditCardNum]").val();
					CustomerObj.paymentInfo.CardType  = $("[name=CardType]").val();
					CustomerObj.paymentInfo.CVV  = $("[name=CVV]").val();
         			ProductLine.Provider.GetCallService("POST",ProductLine.Provider.defaultOptions.updateCustomerUri(), JSON.stringify(CustomerObj), displayResults);
         			readOnlyPaymentInfoDiv.removeClass("ui-screen-hidden");
					editablePaymentInfoDiv.addClass("ui-screen-hidden");
				});
				
				$(".cancelChanges").on('click',function(){	
					populateFields();
				});
				
				/* $("#Shopping").on('click',function(){	
				console.log("here");
					$.mobile.pageContainer.pagecontainer("change", "SubCategoriesNew.html", {
							  transition: 'slide',
							  reloadPage    : true,
							}); 
				}); */
				 
			});	 	
		</script>
	</div></body>
</html>